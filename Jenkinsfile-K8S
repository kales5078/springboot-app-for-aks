pipeline {
    agent any   
    stage('Integrate Jenkins with EKS Cluster and Deploy App') {
        steps {
                withAWS(credentials: '8799cbb5-0db1-405c-a1ee-5a2635fb1bbd', region: 'us-east-1') {
                  script {
                    sh ('aws eks update-kubeconfig --name POC --region us-east-1')
                    sh "kubectl apply -f eks-deploy-from-ecr.yaml"
                }
           }
        }
     }
}
